<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop</title>
    <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet'>
    <link rel="stylesheet" href="/Styles/prod-details.css">
</head>

<body>
    <div class="container">
        <div class="category-filters">
            <h3>Category</h3>
            <button class="filter-btn"><img src="/imgs/filter.png" width="15px" height="15px"> Filter</button>
            <label class="category-filter">
                <p>Electronics</p>
                <input type="checkbox" class="box" value="Electronics">
                <span class="checkmark"></span>
            </label>
            <label class="category-filter">
                <p>Men's clothing</p>
                <input type="checkbox" class="box" value="Men's clothing">
                <span class="checkmark"></span>
            </label>
            <label class="category-filter">
                <p>Jelwery</p>
                <input type="checkbox" class="box" value="Jelwery">
                <span class="checkmark"></span>
            </label>
            <label class="category-filter">
                <p>Woman's clothing</p>
                <input type="checkbox" class="box" value="Woman's clothing">
                <span class="checkmark"></span>
            </label>
        </div>

        <div class="product-container">
            <div class="listProduct">

            </div>
            <div class="loading"><img src="/imgs/load.gif" alt="" width="60px" height="60px"></div>
        </div>

        <script>
            var cards = document.querySelector(".product-container");
            var loading = document.querySelector(".loading");
            // var page = 1; // Keep track of the current page
            // var productsPerPage = 8;
            window.onload = function () {
                getData();
            };
            function getData() {
                loading.style.display = "flex";
                let products = null;
                // get datas from file json
                fetch('https://fakestoreapi.com/products', { method: "GET" })
                    .then(response => response.json())
                    .then(data => {
                        products = data;

                        function addDataToHTML() {
                            // remove datas default from HTML
                            let listProductHTML = document.querySelector('.listProduct');

                            // add new datas
                            if (products != null) // if has data
                            {
                                products.forEach(product => {
                                    let newProduct = document.createElement('a');
                                    newProduct.href = 'detail.html?id=' + product.id;
                                    newProduct.classList.add('item');
                                    newProduct.innerHTML =
                                        `<img src="${product.image}" alt="" width="100" height="200" loading="lazy">
                             <h2>${product.title}</h2>
                             <div class="price">EGP ${product.price}</div>
                             <img src="/imgs/wish.png" alt="" width="16" height="16" style="position: absolute; bottom: 0; right: 0; padding-right: 20px; padding-bottom: 15px;">`;

                                    listProductHTML.appendChild(newProduct);
                                });
                            }

                        }
                        addDataToHTML();
                        loading.style.display = "none";
                        // page++;
                    })
                    .catch(error => {
                        console.error('Error fetching data:', error);
                        loading.innerHTML = "Error loading data.";
                    });
            }

            // function getNewData() {
            //     productsPerPage += 8; // Increment the number of products to load
            //         getData();
            //     // setTimeout(() => {
            //     //     // products = products + 1;
            //     //     // console.log(products);
                    
            //     // }, 500);
            // }
            // window.onscroll = function () {
            //     const { scrollTop, scrollHeight, clientHeight } =
            //         document.documentElement;
            //     if (scrollTop + clientHeight >= scrollHeight -10) {
            //         getNewData();
            //     }
            // }



        </script>
</body>

</html>